# 🎨 UI設計書（SNSチャットアプリ）

## 基本方針

- **モダンでクリーンなデザイン**: Tailwind CSSによるユーティリティファースト
- **レスポンシブデザイン**: モバイルファーストアプローチ
- **アクセシビリティ**: 適切なコントラスト比とフォーカス管理
- **ユーザビリティ**: 直感的な操作とフィードバック

### 配色システム
- **プライマリカラー**: Blue-600 (#2563eb) - ボタン、アクティブ状態
- **セカンダリカラー**: Gray-600 (#4b5563) - テキスト、アイコン
- **背景カラー**: Gray-50 (#f9fafb) - 全体背景
- **ホワイト**: #ffffff - カード、メッセージ背景
- **アクセントカラー**: Blue-100 (#dbeafe) - 自分のアイコン背景

### タイポグラフィ
- **フォント**: システムフォント（font-sans）
- **本文**: text-sm (14px) - メッセージ内容
- **見出し**: font-medium - ユーザー名、タイトル
- **補助テキスト**: text-xs (12px) - 時刻、ステータス

---

## 🧭 ナビゲーション設計

### 下部ナビゲーション（実装済み）

**5つのタブ構成**:
1. **メンバー** (Users) - ユーザー一覧
2. **トーク** (MessageCircle) - チャット機能
3. **タイムライン** (Clock) - 投稿機能（将来実装）
4. **お知らせ** (Bell) - 通知機能（将来実装）
5. **設定** (Settings) - 設定画面（将来実装）

#### 実装詳細
```typescript
// レスポンシブ対応
- デスクトップ: フルラベル表示
- モバイル: 短縮ラベル（タイムライン→TL、お知らせ→通知）

// 状態管理
- アクティブタブ: blue-600 + blue-50背景
- 非アクティブタブ: gray-500 + hover効果

// アイコンライブラリ
- Lucide React使用（軽量、一貫性）
```

#### AI側で工夫した点
- **パスベース判定**: URLパスによる自動アクティブ状態管理
- **チャット統合**: `/chat/[userId]`もトークタブとして認識
- **レスポンシブテキスト**: 画面サイズに応じた自動テキスト切り替え
- **ホバー効果**: デスクトップでの操作性向上

---

## 💬 チャット機能UI設計

### トーク画面構成（実装済み）

#### ユーザーリスト画面
**タブ切り替え設計**:
- **ユーザー**: 全ユーザー一覧（1対1チャット用）
- **グループ**: グループチャット一覧（将来実装）

```typescript
// タブ実装
const tabs = [
  { id: 'users', label: 'ユーザー' },
  { id: 'groups', label: 'グループ' }
];

// ユーザーカード設計
- アイコン: 頭文字表示（8x8サイズ）
- ユーザー名: メイン表示
- ニックネーム: サブ表示
- クリック→チャット画面遷移
```

#### AI側で工夫した点
- **統一感のあるカード**: 一貫したレイアウトとスタイリング
- **視覚的階層**: ユーザー名とニックネームの適切な優先度
- **インタラクション**: ホバー効果とクリック領域の最適化

### 1対1チャット画面（実装済み）

#### ヘッダー設計
```typescript
// 構成要素
- 戻るボタン（ArrowLeft）
- 相手のアイコン（頭文字）
- 相手の名前 + オンライン状態
- メニューボタン（MoreVertical）

// スタイリング
- 白背景 + 下ボーダー
- シャドウ効果
- レスポンシブパディング
```

#### メッセージエリア設計
**吹き出しUI実装**:

```typescript
// 自分のメッセージ（右寄せ）
- 背景: bg-blue-600（青色）
- テキスト: text-white
- 配置: justify-end + flex-row-reverse
- 角丸: rounded-br-sm（右下角を直角に）

// 相手のメッセージ（左寄せ）
- 背景: bg-white + border
- テキスト: text-gray-900
- 配置: justify-start + flex-row
- 角丸: rounded-bl-sm（左下角を直角に）
```

**発言者情報表示**:
```typescript
// アイコン
- サイズ: w-8 h-8
- 背景: 自分=blue-100、相手=gray-100
- 位置: メッセージの横（適切なマージン）

// ニックネーム
- サイズ: text-xs
- 色: text-gray-500
- 位置: メッセージバブルの上

// 時刻表示
- サイズ: text-xs
- 色: text-gray-400
- 位置: メッセージ枠外の右下
- マージン: 自分=mr-10、相手=ml-10
```

#### AI側で工夫した点
- **flex-row-reverse対応**: space-xの問題を回避し、適切なマージン設定
- **視覚的バランス**: アイコン、ニックネーム、時刻の配置最適化
- **日付区切り**: 日付が変わる際の自動区切り表示
- **自動スクロール**: 新メッセージ受信時の最下部スクロール

#### メッセージ入力エリア
```typescript
// 構成
- テキスト入力: rounded-full + focus:ring
- 送信ボタン: 条件付きスタイル + アイコン

// 状態管理
- 送信中: disabled + visual feedback
- 楽観的UI: 即座な表示更新
- エラー処理: 入力内容復元
```

### 日付・時刻表示設計

#### フォーマット仕様
```typescript
// 日付区切り
- 今日: "今日"
- 昨日: "昨日"
- それ以外: "2024/01/15"形式

// 時刻表示
- フォーマット: "HH:MM"（24時間制）
- ロケール: ja-JP
```

#### AI側で工夫した点
- **国際化対応**: 日本語ロケールでの適切な日時表示
- **相対日付**: ユーザーフレンドリーな日付表現
- **一貫性**: 全体を通じた統一されたフォーマット

---

## 📱 レスポンシブデザイン設計

### ブレークポイント戦略
```css
/* Tailwind CSS ブレークポイント */
- sm: 640px以上（タブレット）
- lg: 1024px以上（デスクトップ）

/* メッセージ幅制御 */
- モバイル: max-w-xs (20rem)
- デスクトップ: lg:max-w-md (28rem)
```

### モバイル最適化
- **タッチ対応**: 適切なタッチターゲットサイズ（44px以上）
- **スクロール**: 慣性スクロール対応
- **キーボード**: 入力時のビューポート調整

#### AI側で工夫した点
- **条件分岐**: 画面サイズに応じたコンポーネント表示切り替え
- **パフォーマンス**: 不要な再レンダリング防止
- **アクセシビリティ**: フォーカス管理とキーボードナビゲーション

---

## 🎨 コンポーネント設計

### 実装済みコンポーネント

#### `AuthProvider`
```typescript
// 機能
- グローバル認証状態管理
- 自動リダイレクト
- ローディング状態管理

// UI要素
- ローディングスピナー
- 中央配置レイアウト
```

#### `BottomNavigation`
```typescript
// 機能
- 5タブナビゲーション
- アクティブ状態管理
- レスポンシブラベル

// UI要素
- アイコン + テキスト
- ホバー効果
- アクティブ状態のハイライト
```

#### `ChatPage`
```typescript
// 機能
- 1対1チャット
- リアルタイムメッセージ
- 楽観的UI更新

// UI要素
- ヘッダー（戻る + ユーザー情報）
- メッセージエリア（スクロール可能）
- 入力エリア（送信フォーム）
```

### 将来実装予定コンポーネント

#### `GroupChatList`
- グループ一覧表示
- 最新メッセージプレビュー
- 未読バッジ表示

#### `TimelineCard`
- 投稿カード形式
- 画像 + テキスト
- いいねボタン

#### `NotificationList`
- 通知一覧
- 既読/未読状態
- 通知タイプ別アイコン

---

## 🔧 インタラクション設計

### アニメーション・トランジション
```css
/* 実装済み */
- ホバー効果: hover:bg-gray-100
- フォーカス: focus:ring-2 focus:ring-blue-500
- トランジション: transition-colors

/* 将来実装予定 */
- メッセージ送信アニメーション
- ページ遷移トランジション
- ローディング状態アニメーション
```

### フィードバック設計
- **送信状態**: ボタンの無効化 + 視覚的フィードバック
- **エラー状態**: 適切なエラーメッセージ表示
- **成功状態**: 楽観的UI更新

#### AI側で工夫した点
- **一貫性**: 全体を通じた統一されたインタラクション
- **予測可能性**: ユーザーの期待に沿った動作
- **パフォーマンス**: 60fps維持のための最適化

---

## 📐 レイアウトシステム

### グリッドシステム
```typescript
// Flexboxベース
- 縦方向: flex flex-col
- 横方向: flex items-center
- 配置: justify-start/center/end

// スペーシング
- 統一マージン: space-y-4, space-x-2
- パディング: p-4, px-4, py-3
```

### 余白設計
```css
/* 統一された余白システム */
- xs: 0.25rem (1)
- sm: 0.5rem (2)
- md: 1rem (4)
- lg: 1.5rem (6)
- xl: 2rem (8)
```

#### AI側で工夫した点
- **一貫性**: 統一された余白システム
- **階層**: 適切な視覚的階層の構築
- **バランス**: 要素間の適切な関係性

---

## 🎯 ユーザビリティ設計

### アクセシビリティ
- **キーボードナビゲーション**: Tab順序の最適化
- **スクリーンリーダー**: 適切なaria-label
- **コントラスト**: WCAG AA準拠

### パフォーマンス
- **遅延ローディング**: 必要に応じた動的読み込み
- **メモ化**: React.memo, useMemo活用
- **最適化**: 不要な再レンダリング防止

#### AI側で工夫した点
- **プログレッシブエンハンスメント**: 基本機能の確実な動作
- **グレースフルデグラデーション**: エラー時の適切な処理
- **ユーザー中心設計**: 実際の使用シーンを考慮した設計

---

## 🚀 今後の拡張予定

### UI機能拡張
- **ダークモード**: システム設定連動
- **カスタムテーマ**: ユーザー設定可能
- **アニメーション**: より豊かなマイクロインタラクション

### 新機能UI
- **ファイル送信**: ドラッグ&ドロップ対応
- **絵文字**: ピッカー機能
- **メンション**: @ユーザー名補完

### パフォーマンス最適化
- **仮想スクロール**: 大量メッセージ対応
- **画像最適化**: WebP対応、遅延読み込み
- **キャッシュ**: 適切なデータキャッシング

---

## 📝 設計原則まとめ

### 実装で重視した点
1. **一貫性**: 統一されたデザインシステム
2. **使いやすさ**: 直感的な操作性
3. **レスポンシブ**: 全デバイス対応
4. **パフォーマンス**: 高速な動作
5. **拡張性**: 将来機能への対応

### AI側で特に工夫した設計決定
1. **flex-row-reverse問題の解決**: space-xの代わりに個別マージン設定
2. **条件分岐の最適化**: 複雑な条件をシンプルな構造に
3. **状態管理の統一**: 一貫したローディング・エラー処理
4. **アクセシビリティの確保**: 適切なフォーカス管理
5. **パフォーマンスの最適化**: 不要な再レンダリング防止

この設計により、美しく使いやすい、そして拡張可能なSNSチャットアプリのUIが実現されています。
