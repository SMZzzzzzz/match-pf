# ⚙️ 機能仕様書（マッチングプラットフォームWebアプリ）

## 目的

マッチングプラットフォームを構築したい。
業態としては倉庫で働く人が多く、アルバイトや短期パートなど人の入れ替わりの多い業種となっている。
自社のなかでいくつかの案件があり、案件の一覧を表示して既存アルバイトのユーザーが案件を選んでエントリーする仕組みとしたい。
また、エントリー後は管理者ユーザーとチャットを行う機能を設け、希望条件や期間などのやりとりをトーク内で行う。
トークルームには確定ボタンがあり双方で条件を確認して納得したら確定ボタンを押下する。
確定ボタンは双方合意（管理者側とアルバイト側の両方）で確定ボタンが押下されたら成立する。

---

## 機能一覧

### 🔐 ユーザー管理

- ユーザー登録（事前一括登録を前提）
- メールアドレス＋パスワードでログイン
- プロフィール編集
  - 氏名、ニックネーム、誕生日、コメント、画像の設定
- ログアウト

#### 実装済み機能
- **認証システム**: express-sessionとcookieによるセッション管理
- **AuthProvider**: React Context APIによるグローバル認証状態管理
- **認証ガード**: 未認証ユーザーの自動リダイレクト
- **ユーザー情報管理**: データベースと連携したユーザー情報取得・更新

---

### 💬 案件一覧機能

#### 機能

- **案件項目**
  - 案件名
  - 期間
  - 勤務地
  - 時給
  - 募集人数
  - 備考欄
  - お気に入りアイコンON/OFF

- **表示方法**
  - カード形式UIで実装、1案件1カード
  - 初期10件読み込み

---

### 💬 チャット機能（トーク）

#### 機能
- **1対1メッセージ送信**: 完全実装
  - チャットルーム自動作成・取得
  - リアルタイムメッセージ送受信
  - 楽観的UI更新
- **メッセージ表示**: 完全実装
  - 自分の発言：右寄せ（青色吹き出し）
  - 相手の発言：左寄せ（白色吹き出し）
  - 発言者アイコン（頭文字）とニックネーム表示
  - 時刻表示（メッセージ枠外の右下）
  - 日付区切り表示
- **チャット画面UI**: 完全実装
  - 動的ルーティング `/chat/[userId]`
  - レスポンシブデザイン
  - メッセージ自動スクロール
  - 送信状態表示
  - 既読機能

---


### 🧭 ナビゲーション機能

#### 機能
- **下部ナビゲーション**
  - 5つのタブ（案件、タイムライン、お知らせ、設定）
  - Lucide Reactアイコン使用
  - レスポンシブ対応（スマホサイズでテキスト短縮）

---

---

### 📢 お知らせ機能

#### 簡易デモデータ
- 運営からのお知らせ表示（管理画面などで登録）
- トークやタイムラインの通知を一覧で表示
- 既読管理あり

---

### 🧾 タイムライン機能

#### 簡易デモデータ
- 社内掲示板のような投稿型UI
- 投稿：テキスト＋画像（最大3枚程度）
- 投稿には「いいね」ボタンあり
- 投稿者・日付の表示あり
- 将来的にコメント機能も追加予定

---

## API一覧

### 認証API
- **POST /api/users/login**: ユーザーログイン
- **POST /api/users/logout**: ユーザーログアウト
- **GET /api/users/session**: セッション確認

### チャットAPI
- **POST /api/chat/rooms/direct**: 1対1チャットルーム作成・取得
- **GET /api/chat/rooms/:roomId/messages**: メッセージ一覧取得
- **POST /api/chat/rooms/:roomId/messages**: メッセージ送信

---


### テストデータ
- **テストユーザー**: 3名（テスト、user1、user2）
- **チャットルーム**: 3つ（1対1チャット×2、グループチャット×1）
- **メッセージ**: 各チャットルームに複数のテストメッセージ

---

## 技術仕様

### フロントエンド
- **Framework**: Next.js (App Router)
- **言語**: TypeScript
- **UI**: Tailwind CSS
- **アイコン**: Lucide React
- **状態管理**: React Context API (AuthProvider)


### データベース
- jsonファイルで保持

---

### UIレスポンシブ対応
```jsx
// flex-row-reverseとmarginの適切な組み合わせ
<div className={`flex items-start max-w-xs lg:max-w-md ${
  isMyMessage ? 'flex-row-reverse' : 'flex-row'
}`}>
  <div className={`w-8 h-8 rounded-full ${
    isMyMessage ? 'bg-blue-100' : 'bg-gray-100'
  } ${isMyMessage ? 'ml-2' : 'mr-2'}`}>
```

---

